# TODO List

## Phase 1: 项目基础设施 ✅

- [x] 创建项目目录结构
- [x] 编写 README.md 文档
- [ ] 配置 TypeScript
- [ ] 配置 ESLint + Prettier
- [ ] 配置构建工具 (Webpack/esbuild)
- [ ] 设置 Git 仓库

## Phase 2: 核心架构搭建 🚧

### 2.1 依赖注入容器

- [ ] 安装 InversifyJS
- [ ] 创建 IoC 容器配置
- [ ] 定义服务标识符 (TYPES)
- [ ] 定义核心接口

### 2.2 类型系统

- [ ] 定义全局类型 (types/interfaces.ts)
- [ ] 定义窗口接口
- [ ] 定义服务接口
- [ ] 定义事件类型

### 2.3 主进程架构

- [ ] Application 主类
- [ ] WindowManager 窗口管理器
- [ ] EventBus 事件总线（可选）

## Phase 3: 窗口管理模块 📱

### 3.1 基础窗口类

- [ ] BaseWindow 抽象类
- [ ] 窗口生命周期管理
- [ ] 窗口状态管理

### 3.2 具体窗口实现

- [ ] TranslatorWindow - Google 翻译窗口
  - [ ] 加载 Google 翻译 URL
  - [ ] 隐藏/显示控制
  - [ ] 页面加载状态检测
- [ ] ScreenshotWindow - 截图选择窗口
  - [ ] 全屏透明遮罩
  - [ ] 区域选择交互
  - [ ] 坐标计算
- [ ] ResultWindow - 结果展示窗口（可选）
  - [ ] 翻译结果展示
  - [ ] 复制功能
  - [ ] 历史记录

## Phase 4: 核心服务实现 🎯

### 4.1 TrayService - 托盘服务

- [ ] 创建托盘图标
- [ ] 构建上下文菜单
- [ ] 菜单点击事件处理
- [ ] 托盘图标状态更新

### 4.2 ScreenshotService - 截图服务

- [ ] 触发截图模式
- [ ] 屏幕捕获
- [ ] 区域裁剪
- [ ] 图片格式转换 (Buffer/Base64/DataURL)

### 4.3 TranslatorService - 翻译服务

- [ ] Google 翻译页面交互
- [ ] 图片上传逻辑
- [ ] 模拟用户操作（点击上传按钮）
- [ ] 等待翻译结果
- [ ] 结果提取（可选）

### 4.4 ShortcutService - 快捷键服务

- [ ] 全局快捷键注册
- [ ] 快捷键配置管理
- [ ] 快捷键冲突检测
- [ ] 快捷键自定义（可选）

### 4.5 ImageService - 图片处理服务

- [ ] 图片格式转换
- [ ] 图片压缩
- [ ] 图片临时存储
- [ ] 剪贴板操作

### 4.6 ConfigService - 配置服务

- [ ] 配置文件读写
- [ ] 默认配置
- [ ] 用户偏好设置
- [ ] 配置验证

## Phase 5: 渲染进程开发 🎨

### 5.1 截图界面

- [ ] HTML 结构
- [ ] CSS 样式（遮罩、选择框）
- [ ] TypeScript 逻辑
  - [ ] 鼠标事件处理
  - [ ] 区域选择绘制
  - [ ] 键盘事件（ESC 取消）
  - [ ] 尺寸显示
- [ ] 与主进程通信

### 5.2 结果展示界面（可选）

- [ ] HTML 结构
- [ ] CSS 样式
- [ ] 翻译结果展示
- [ ] 复制按钮
- [ ] 历史记录列表

### 5.3 Preload 脚本

- [ ] 安全的 IPC 通信封装
- [ ] API 接口定义
- [ ] 类型声明

## Phase 6: Google 翻译集成 🌐

### 6.1 页面自动化

- [ ] 研究 Google 翻译图片上传 UI 结构
- [ ] 编写 DOM 操作脚本
- [ ] 模拟点击上传按钮
- [ ] 处理文件选择对话框

### 6.2 图片上传策略

- [ ] 方案 A: 模拟拖放 (Drag & Drop)
- [ ] 方案 B: 模拟点击 + 文件选择
- [ ] 方案 C: 剪贴板粘贴 + 提示用户手动粘贴
- [ ] 方案 D: 使用 Google Cloud Vision API（需要 API Key）

### 6.3 结果处理

- [ ] 监听翻译结果加载
- [ ] 提取翻译文本（可选）
- [ ] 截图保存翻译结果（可选）

## Phase 7: 用户体验优化 ✨

### 7.1 视觉设计

- [ ] 设计并创建托盘图标
  - [ ] 普通状态
  - [ ] 活动状态
  - [ ] 模板图标（适配深浅模式）
- [ ] 截图界面动画
- [ ] 加载状态提示
- [ ] 错误提示样式

### 7.2 交互优化

- [ ] 截图区域最小尺寸限制
- [ ] 双击托盘图标行为
- [ ] 快捷键提示
- [ ] 操作反馈（声音/视觉）

### 7.3 性能优化

- [ ] 窗口预加载策略
- [ ] 图片压缩
- [ ] 内存管理
- [ ] 启动速度优化

## Phase 8: 错误处理与日志 🐛

- [ ] 全局错误捕获
- [ ] 日志系统
  - [ ] 开发日志
  - [ ] 生产日志
  - [ ] 日志文件管理
- [ ] 错误上报（可选）
- [ ] 用户友好的错误提示

## Phase 9: 测试 🧪

### 9.1 单元测试

- [ ] 服务层测试
- [ ] 工具函数测试
- [ ] Mock 依赖

### 9.2 集成测试

- [ ] 截图流程测试
- [ ] 窗口交互测试

### 9.3 E2E 测试

- [ ] 完整工作流测试
- [ ] 快捷键测试

## Phase 10: 构建与发布 📦

### 10.1 构建配置

- [ ] 生产构建优化
- [ ] 代码混淆
- [ ] 资源压缩
- [ ] 签名配置（macOS）

### 10.2 打包

- [ ] DMG 安装包
- [ ] 自动更新配置
- [ ] 版本管理

### 10.3 发布

- [ ] GitHub Releases
- [ ] 版本说明
- [ ] 用户手册

## Phase 11: 高级特性（可选）🚀

- [ ] 多语言支持
- [ ] 自定义快捷键
- [ ] 翻译历史记录
- [ ] 导出功能
- [ ] 多翻译引擎支持（百度、有道等）
- [ ] 偏好设置界面
- [ ] 自动更新功能
- [ ] 统计功能
- [ ] 云同步（可选）

## 当前优先级

### 🔥 High Priority

1. 配置 TypeScript 和构建工具
2. 搭建依赖注入架构
3. 实现基础窗口管理
4. 实现截图功能

### 🔶 Medium Priority

1. 集成 Google 翻译
2. 优化用户体验
3. 错误处理

### 🔷 Low Priority

1. 测试覆盖
2. 高级特性
3. 文档完善

---

**更新时间**: 2025-11-14  
**当前版本**: v0.1.0-alpha  
**目标版本**: v1.0.0

